<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Qgis-server-install : qgis server installation procedure">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Qgis-server-install</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/silvesterkkk/qgis-server-install">View on GitHub</a>

          <h1 id="project_title">Qgis-server-install</h1>
          <h2 id="project_tagline">qgis server installation procedure</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/silvesterkkk/qgis-server-install/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/silvesterkkk/qgis-server-install/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="qgis-server-and-qgis-webclient-installation-procedure-based-on-windows-7-august-2014" class="anchor" href="#qgis-server-and-qgis-webclient-installation-procedure-based-on-windows-7-august-2014"><span class="octicon octicon-link"></span></a>QGIS Server and QGIS WebClient installation procedure (Based on Windows 7, August 2014)</h1>

<p><br></p>

<h2>
<a name="contents" class="anchor" href="#contents"><span class="octicon octicon-link"></span></a>CONTENTS</h2>

<ul>
<li>Install QGIS Server</li>
<li>Edit config file / Modify file extention</li>
<li>QGIS server validation</li>
<li>Download &amp; install QGIS WebClient</li>
<li>References</li>
</ul><h2>
<a name="install-qgis-server" class="anchor" href="#install-qgis-server"><span class="octicon octicon-link"></span></a>INSTALL QGIS Server</h2>

<ol>
<li>Download OSGeo4W installer from <a href="https://www.qgis.org/en/site/forusers/download.html">HERE</a>
</li>
<li>I have downloaded the 32-bit version although running a 64-bit machine.</li>
<li>Execute the file and follow the prompt.

<ul>
<li>Select advanced Install, <strong>NEXT</strong>
</li>
<li>Select Install from internet, <strong>NEXT</strong>
</li>
<li>Accept the default (unless you want to change), <strong>NEXT</strong>
</li>
<li>Accept the default (unless you want to change), <strong>NEXT</strong>
</li>
<li>Select connection option (I've used 'Direct connection'), <strong>NEXT</strong>
</li>
<li>Select available download sites: Should only one available <strong>NEXT</strong>
</li>
<li>Once you get to the 'Select packages' window, select the following options (All other dependencies will be automatically selected and installed).

<ul>
<li>Under DESKTOP, select <code>qgis: QGIS Desktop</code> &amp; <code>qgis-dev: QGIS nightly build of the master</code>
<img src="https://cloud.githubusercontent.com/assets/8164012/3790271/e8c9bb06-1af4-11e4-9ee7-fa122374970e.png" alt="alt text">
</li>
<li>Under WEB, select <code>Apache Webserver</code> &amp; <code>qgis-server: QGIS Server</code>
<img src="https://cloud.githubusercontent.com/assets/8164012/3790272/eaf76838-1af4-11e4-9e37-f5f15b76eec8.png" alt="alt text">
</li>
</ul>
</li>
</ul>
</li>
</ol><h2>
<a name="edit-config-file" class="anchor" href="#edit-config-file"><span class="octicon octicon-link"></span></a>EDIT CONFIG FILE</h2>

<h4>
<a name="1-edit-httpd_qgisconf" class="anchor" href="#1-edit-httpd_qgisconf"><span class="octicon octicon-link"></span></a>1. EDIT httpd_qgis.conf</h4>

<p>:This is required because QGIS on windows seems not to work as FastCGI<br></p>

<ul>
<li>Locate the following file and open in text editor.<br><code>c:\osgeo4w\httpd.d\httpd_qgis.conf</code><br>
</li>
<li>Change the following lines of code<br>
</li>
</ul><pre><code>LoadModule fcgid_module modules/mod_fcgid.so
to
LoadModule cgi_module modules/mod_cgi.so
</code></pre>

<pre><code>DefaultInitEnv
to
SetEnv
</code></pre>

<h4>
<a name="2-change-qgis_mapservfcgiexe" class="anchor" href="#2-change-qgis_mapservfcgiexe"><span class="octicon octicon-link"></span></a>2. CHANGE qgis_mapserv.fcgi.exe</h4>

<p>: This is required because the QGIS WebClient which you will install later, can NOT address *.exe files, although   the QGIS Server could.<br></p>

<ul>
<li>Locate the following file.<br><code>c:\OSGeo4W\apps\qgis\bin\qgis_mapserv.fcgi.exe</code><br>
</li>
<li>Delete the extention of the file so that it looks like the following.<br><code>c:\OSGeo4W\apps\qgis\bin\qgis_mapserv.fcgi</code>
</li>
</ul><h3>
<a name="qgis-server-validation" class="anchor" href="#qgis-server-validation"><span class="octicon octicon-link"></span></a>QGIS Server VALIDATION</h3>

<p>: This step will validate the installation of QGIS server.<br></p>

<ul>
<li>Type the following URL to your web browser.<br><code>http://localhost/qgis/qgis_mapserv.fcgi?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetCapabilities</code>
</li>
<li>If you receive XML formatted information on your browser, this means your QGIS server has been installed correctly.<br>
</li>
<li>(OPTIONAL) You will receive a map image by sending <code>GetMap</code> request  as URL shown below (if you have a QGIS project on your machine).<br><code>http://localhost/qgis/qgis_mapserv.fcgi?SERVICE=WMS&amp;VERSION=1.3.0&amp;SRS=EPSG:31467&amp;REQUEST=GetMap&amp;map=C:/path-to-a-simple-qgis-project.qgs&amp;WIDTH=1000&amp;HEIGHT=800&amp;LAYERS=weg,bach&amp;FORMAT=image/png</code>
</li>
</ul><h3>
<a name="download--install-qgis-webclient" class="anchor" href="#download--install-qgis-webclient"><span class="octicon octicon-link"></span></a>DOWNLOAD &amp; INSTALL QGIS WebClient</h3>

<h4>
<a name="1-what-is-qgis-webclient--why-do-you-need-it" class="anchor" href="#1-what-is-qgis-webclient--why-do-you-need-it"><span class="octicon octicon-link"></span></a>1. What is QGIS WebClient &amp; why do you need it?</h4>

<ul>
<li>Under construction</li>
</ul><h4>
<a name="2-download-qgis-webclient" class="anchor" href="#2-download-qgis-webclient"><span class="octicon octicon-link"></span></a>2. Download QGIS WebClient</h4>

<ul>
<li>Go to the following GitHub site: <a href="https://github.com/qgis/QGIS-Web-Client">https://github.com/qgis/QGIS-Web-Client</a>
</li>
<li>Download the project as ZIP file (there is a link to your right pane).</li>
<li>Unzip the file to the following location.
<code>c:\OSGeo4W\apache\htdocs</code>
</li>
<li>So you now have the QGIS WebClient files in: <br><code>c:\OSGeo4W\apache\htdocs\QGIS-Web-Client-master</code>
</li>
</ul><h4>
<a name="3-edit-config-file" class="anchor" href="#3-edit-config-file"><span class="octicon octicon-link"></span></a>3. Edit config file</h4>

<ul>
<li>Locate the following file and open in the text editor.
<code>C:\OSGeo4W\apache\conf\httpd.conf</code>
</li>
<li>Go to the line 324 (approx.), and change the line of code as follows.</li>
</ul><pre><code>ScriptAlias /cgi-bin/ "C:\OSGeo4W/bin/"
to
ScriptAlias /cgi-bin/ "C:\OSGeo4W/apps/qgis/bin/"
</code></pre>

<h4>
<a name="4-restart-apache" class="anchor" href="#4-restart-apache"><span class="octicon octicon-link"></span></a>4. Restart Apache</h4>

<ul>
<li>You need to restart Apache everytime you make changes to the Apache config file.</li>
<li>You can do this by:
<code>START MENU --&gt; Programs --&gt; OSGeo4W --&gt; Apache</code>
</li>
</ul><h4>
<a name="5-validate-installation" class="anchor" href="#5-validate-installation"><span class="octicon octicon-link"></span></a>5. Validate installation</h4>

<ul>
<li>Enter the following URL in your web browser.
<code>http://localhost/QGIS-Web-Client-master/site/index.html</code>
</li>
<li>You will end up in the QGIS WebClient Default Client Landing Page. This means you have installed it correctly.</li>
<li>If you have your own QGIS project on your machine, you can edit the above URL to point it to the project like:
<code>http://localhost/QGIS-Web-Client-master/site/qgiswebclient.html?map=C:/OSGeo4W/apache/htdocs/QGIS-Web-Client-master/projects/helloworld.qgs</code>
</li>
</ul><h2>
<a name="references" class="anchor" href="#references"><span class="octicon octicon-link"></span></a>REFERENCES</h2>

<ul>
<li><a href="http://anitagraser.com/2012/04/06/qgis-server-on-windows7-step-by-step/">http://anitagraser.com/2012/04/06/qgis-server-on-windows7-step-by-step/</a></li>
<li><a href="http://osgeo-org.1560.x6.nabble.com/QGIS-Web-Client-for-Windows-7-td5128712.html">http://osgeo-org.1560.x6.nabble.com/QGIS-Web-Client-for-Windows-7-td5128712.html</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Qgis-server-install maintained by <a href="https://github.com/silvesterkkk">silvesterkkk</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
